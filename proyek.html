<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proyek Bangunku</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f2f2f2;
      color: #333;
      padding: 0;
    }header {
  background-color: #004085;
  color: white;
  padding: 1rem;
  text-align: center;
  font-size: 1.2rem;
}

.container {
  padding: 1rem;
}

.table-container {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1rem;
  font-size: 14px;
}

th, td {
  border: 1px solid #ccc;
  padding: 8px;
  text-align: left;
}

th {
  background-color: #e9ecef;
}

.button-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

button {
  padding: 0.6rem 1rem;
  background-color: #007bff;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
}

button:hover {
  background-color: #0056b3;
}

.slide {
  position: fixed;
  left: -100%;
  top: 0;
  width: 80%;
  max-width: 300px;
  height: 100%;
  background: #fff;
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
  transition: left 0.3s ease;
  z-index: 1000;
  padding: 1rem;
}

.slide.show {
  left: 0;
}

.slide-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.slide-header h3 {
  margin: 0;
  font-size: 1.1rem;
}

.slide-close {
  background: none;
  border: none;
  font-size: 1.4rem;
  cursor: pointer;
}

.slide ul {
  list-style: none;
  padding-left: 0;
  margin-top: 1rem;
}

.slide li {
  padding: 0.5rem;
  border-bottom: 1px solid #ddd;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.slide li button {
  background: #dc3545;
  font-size: 0.8rem;
  padding: 0.3rem 0.6rem;
}

  </style>
</head>
<body>  <header>
    Proyek Bangunku
  </header>  <div class="container">
    <div class="button-row">
      <button onclick="showMaterialOptions()">Tambah Perhitungan Material</button>
      <button onclick="saveProject()">Simpan Proyek</button>
      <button onclick="openSlide()">Buka Proyek Tersimpan</button>
    </div><div class="table-container">
  <table id="rabTable">
    <thead>
      <tr>
        <th>Nama Ruangan</th>
        <th>Pekerjaan</th>
        <th>Kebutuhan Bahan</th>
        <th>Opsi</th>
      </tr>
    </thead>
    <tbody id="rabBody">
      <!-- baris perhitungan muncul di sini -->
    </tbody>
  </table>
</div>

  </div>  <div class="slide" id="slidePanel">
    <div class="slide-header">
      <h3>Proyek Tersimpan</h3>
      <button class="slide-close" onclick="closeSlide()">&times;</button>
    </div>
    <ul id="savedProjects"></ul>
  </div>  <script>
    let rabData = [];

    function showMaterialOptions() {
      window.location.href = 'input_material.html'; // alihkan ke halaman input perhitungan
    }

    function saveProject() {
      const name = prompt("Beri nama untuk proyek ini:");
      if (name && rabData.length > 0) {
        localStorage.setItem(`project_${name}`, JSON.stringify(rabData));
        alert("Proyek berhasil disimpan.");
      } else {
        alert("Tidak ada data yang disimpan.");
      }
    }

    function renderTable() {
      const tbody = document.getElementById("rabBody");
      tbody.innerHTML = '';
      rabData.forEach((row, index) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${row.nama}</td>
          <td>${row.pekerjaan}</td>
          <td>${row.bahan}</td>
          <td><button onclick="hapusBaris(${index})">âœ•</button></td>
        `;
        tbody.appendChild(tr);
      });
    }

    function hapusBaris(index) {
      rabData.splice(index, 1);
      renderTable();
    }

    function openSlide() {
      const slide = document.getElementById("slidePanel");
      slide.classList.add("show");
      const savedList = document.getElementById("savedProjects");
      savedList.innerHTML = '';
      Object.keys(localStorage).forEach(k => {
        if (k.startsWith("project_")) {
          const name = k.replace("project_", "");
          const li = document.createElement("li");
          const btnDelete = document.createElement("button");
          const btnEdit = document.createElement("button");
          const btnExport = document.createElement("button");

          li.textContent = name;

          btnDelete.textContent = "Hapus";
          btnDelete.onclick = () => {
            if (confirm("Hapus proyek " + name + "?")) {
              localStorage.removeItem(k);
              openSlide();
            }
          };

          btnEdit.textContent = "Edit";
          btnEdit.onclick = () => {
            const data = localStorage.getItem(k);
            rabData = JSON.parse(data);
            renderTable();
            closeSlide();
          };

          btnExport.textContent = "PDF";
          btnExport.onclick = () => {
            alert("Fitur ekspor PDF akan ditambahkan nanti.");
          };

          li.appendChild(btnEdit);
          li.appendChild(btnExport);
          li.appendChild(btnDelete);
          savedList.appendChild(li);
        }
      });
    }

    function closeSlide() {
      document.getElementById("slidePanel").classList.remove("show");
    }

    window.addEventListener('DOMContentLoaded', () => {
      // Cek jika user kembali dari halaman input_material dan ada data disimpan sementara
      const data = sessionStorage.getItem("rab_temp");
      if (data) {
        const parsed = JSON.parse(data);
        rabData.push(parsed);
        renderTable();
        sessionStorage.removeItem("rab_temp");
      }
    });
  </script></body>
</html>
